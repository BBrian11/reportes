.ai-fab{
    position: fixed;
    right: 18px;
    bottom: 18px;
    width: 52px;
    height: 52px;
    border-radius: 999px;
    border: 1px solid rgba(0,0,0,.12);
    background: #0f172a;
    color: #fff;
    font-size: 20px;
    box-shadow: 0 18px 40px rgba(15,23,42,.20);
    z-index: 9999;
  }
  .ai-fab:hover{ filter: brightness(1.05); }
  .ai-fab:active{ transform: translateY(1px); }
  
  .ai-drawer{
    position: fixed;
    right: 18px;
    bottom: 84px;
    width: min(420px, calc(100vw - 36px));
    height: min(620px, calc(100vh - 120px));
    background: #ffffff;
    border: 1px solid rgba(0,0,0,.10);
    border-radius: 18px;
    box-shadow: 0 22px 60px rgba(15,23,42,.18);
    z-index: 9999;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  
  .ai-head{
    padding: 12px 12px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    border-bottom: 1px solid rgba(0,0,0,.06);
    background: linear-gradient(180deg, #fff 0%, #fafafa 100%);
  }
  .ai-title{ display:flex; flex-direction:column; gap:2px; }
  .ai-sub{ font-size: 12px; color: #64748b; }
  .ai-head-actions{ display:flex; gap:6px; }
  
  .ai-btn{
    border-radius: 10px;
    padding: 8px 10px;
    border: 1px solid rgba(0,0,0,.10);
    background: #fff;
    cursor: pointer;
    font-size: 13px;
  }
  .ai-btn-ghost{ border-color: transparent; background: transparent; }
  .ai-btn-ghost:hover{ background: rgba(15,23,42,.05); }
  
  .ai-context{
    padding: 10px 12px;
    display:flex;
    flex-wrap: wrap;
    gap: 8px;
    border-bottom: 1px solid rgba(0,0,0,.06);
  }
  .ai-chip{
    font-size: 12px;
    background: rgba(15,23,42,.04);
    border: 1px solid rgba(15,23,42,.06);
    padding: 6px 8px;
    border-radius: 999px;
  }
  
  .ai-quick{
    padding: 8px 12px 10px;
    display:flex;
    flex-wrap: wrap;
    gap: 8px;
    border-bottom: 1px solid rgba(0,0,0,.06);
  }
  .ai-quick-btn{
    font-size: 12px;
    padding: 7px 10px;
    border-radius: 999px;
    border: 1px solid rgba(2,132,199,.25);
    background: rgba(2,132,199,.07);
    cursor:pointer;
  }
  .ai-quick-btn:disabled{ opacity:.6; cursor:not-allowed; }
  
  .ai-list{
    flex: 1 1 auto;
    padding: 12px;
    overflow: auto;
    background: #fbfbfd;
  }
  .ai-empty{
    display:flex;
    gap: 10px;
    align-items:flex-start;
    border: 1px dashed rgba(0,0,0,.15);
    background: #fff;
    padding: 12px;
    border-radius: 14px;
  }
  .ai-emoji{ font-size: 20px; }
  .ai-empty-title{ font-weight: 700; }
  .ai-empty-sub{ font-size: 13px; color: #64748b; }
  
  .ai-msg{ margin-bottom: 10px; }
  .ai-msg.is-user{ display:flex; justify-content:flex-end; }
  .ai-msg.is-ai{ display:flex; justify-content:flex-start; }
  
  .ai-bubble{
    width: min(92%, 340px);
    background: #fff;
    border: 1px solid rgba(0,0,0,.08);
    border-radius: 16px;
    padding: 10px 10px 8px;
    box-shadow: 0 8px 20px rgba(15,23,42,.06);
  }
  .ai-msg.is-user .ai-bubble{
    background: #0b1222;
    color: #fff;
    border-color: rgba(255,255,255,.10);
  }
  .ai-role{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
    font-size: 12px;
    opacity: .85;
    margin-bottom: 6px;
  }
  .ai-time{ font-size: 11px; opacity: .75; }
  
  .ai-text{
    margin: 0;
    white-space: pre-wrap;
    word-break: break-word;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
    font-size: 13px;
    line-height: 1.35;
  }
  
  .ai-apply{
    margin-top: 10px;
    display:flex;
    gap: 8px;
    flex-wrap: wrap;
  }
  .ai-btn-primary{
    background: #2563eb;
    border-color: rgba(37,99,235,.35);
    color: #fff;
  }
  .ai-btn-outline{
    background: transparent;
    border-color: rgba(37,99,235,.35);
    color: #2563eb;
  }
  .ai-msg.is-user .ai-btn-outline{ color: #fff; border-color: rgba(255,255,255,.25); }
  
  .ai-foot{
    padding: 10px 12px;
    border-top: 1px solid rgba(0,0,0,.06);
    background: #fff;
    display:flex;
    gap: 10px;
    align-items:flex-end;
  }
  .ai-input{
    flex:1 1 auto;
    border-radius: 14px;
    border: 1px solid rgba(0,0,0,.12);
    padding: 10px 10px;
    resize: none;
    font-size: 13px;
    outline: none;
  }
  .ai-send{
    border-radius: 14px;
    padding: 10px 14px;
    border: 1px solid rgba(37,99,235,.35);
    background: #2563eb;
    color: #fff;
    cursor:pointer;
  }
  .ai-send:disabled{ opacity:.65; cursor:not-allowed; }
  